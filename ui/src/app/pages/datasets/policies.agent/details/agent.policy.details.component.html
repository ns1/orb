<nb-card size="large" class="nb-card-medium" xmlns="http://www.w3.org/1999/html">
  <nb-card-header>
    Agent Policy Details
    <button nbButton
            ghost="true"
            size="small"
            class="orb-close-dialog"
            (click)="onClose()">
      <span class="nb-close"></span>
    </button>
  </nb-card-header>
  <nb-card-body *ngIf="!isLoading">
    <div class="row">
      <div class="col-6 d-flex flex-column align-items-start">
        <p class="detail-title">Policy Name</p>
        <p>{{ agentPolicy.name }}</p>
      </div>
      <div class="col-6 d-flex flex-column align-items-start">
        <p class="detail-title">Policy Description</p>
        <p>{{ agentPolicy.description }}</p>
      </div>
    </div>
    <div class="row">
      <div class="col-6 d-flex flex-column align-items-start">
        <p class="detail-title">Policy Backend</p>
        <p>{{ agentPolicy.backend }}</p>
      </div>
      <div class="col-6 d-flex flex-column align-items-start">
        <p class="detail-title">Input Details</p>
        <p>Input type: {{ agentPolicy.policy.input.input_type }}</p>
        <p>Tap: {{ agentPolicy.policy.input.tap }}</p>
      </div>
    </div>
    <div class="row">
      <div class="col-12 d-flex flex-column align-items-start">
        <p class="detail-title">Handlers</p>
        <nb-accordion>
          <nb-accordion-item *ngFor="let module of agentPolicy.policy.handlers.modules | keyvalue;">
            <nb-accordion-item-header>{{ module.key }} | {{module.value.type}}</nb-accordion-item-header>
            <nb-accordion-item-body>
              <p>Configuration: {{module.value.config | json}}</p>
              <p>Filters: {{module.value.filter | json}}</p>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>
      </div>
    </div>
  </nb-card-body>

  <nb-card-footer>
    <button nbButton status="primary" class="sink-edit-button" (click)="onOpenEdit()">Edit</button>
  </nb-card-footer>
</nb-card>
