<nb-card
  class="nb-card-medium"
  size="large">
  <nb-card-header>
    Dataset Details
    <button
      (click)="onClose()"
      class="orb-close-dialog"
      ghost="true"
      nbButton
      size="small">
      <span class="nb-close"></span>
    </button>
  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="form">
      <!--      GROUP-->
      <nb-form-field [hidden]="!!group">
        <div>
          <label class="font-weight-bold">Agent Group</label>
          <span class="required">*</span>
        </div>
        <nb-select
          [(selected)]="selectedGroup"
          [disabled]="isEdit || !!group"
          appearance="filled"
          autofocus
          data-orb-qa-id="agent_group_id"
          formControlName="agent_group_id"
          fullWidth="true"
          placeholder="Agent Group Name"
          size="medium"
        >
          <nb-option
            *ngFor="let agentGroup of availableAgentGroups"
            [attr.data-orb-qa-id]="'available_agent_group: '+agentGroup.id"
            [id]="agentGroup.id"
            [value]="agentGroup.id">{{ agentGroup.name }}</nb-option>
        </nb-select>
        <br>
      </nb-form-field>
      <!--      POLICY-->
      <nb-form-field [hidden]="policy">
        <div>
          <label class="font-weight-bold">Collection Policy</label>
          <span class="required">*</span>
        </div>
        <nb-select
          [(selected)]="selectedPolicy"
          [disabled]="isEdit || !!policy"
          appearance="filled"
          autofocus
          data-orb-qa-id="agent_policy_id"
          formControlName="agent_policy_id"
          fullWidth="true"
          placeholder="Policy"
          size="medium"
        >
          <nb-option
            *ngFor="let agentPolicy of availableAgentPolicies"
            [attr.data-orb-qa-id]="'available_agent_policy: '+agentPolicy.id"
            [id]="agentPolicy.id"
            [value]="agentPolicy.id">{{ agentPolicy.name }}</nb-option>
        </nb-select>
        <br>
      </nb-form-field>
      <!--      SINK-->
      <div>
        <label class="font-weight-bold">Sinks</label>
        <span class="required">*</span>
      </div>
      <ngx-sink-display [(selectedSinks)]="selectedSinks"></ngx-sink-display>
      <ngx-sink-control
        [(selectedSinks)]="selectedSinks"
        [sinksList]="unselectedSinks"></ngx-sink-control>
      <br>
      <!--      NAME-->
      <br>
      <nb-form-field>
        <div>
          <label class="font-weight-bold">Dataset Name</label>
          <span class="required">*</span>
        </div>
        <input
          autofocus
          data-orb-qa-id="name"
          fieldSize="medium"
          formControlName="name"
          fullWidth="true"
          nbInput/>
      </nb-form-field>
    </form>
  </nb-card-body>
  <nb-card-footer>
    <button
      (click)="onFormSubmit()"
      class="dataset-save-button"
      nbButton
      shape="round"
      status="primary">Save
    </button>
    <button
      (click)="onClose()"
      ghost
      nbButton
      shape="round"
      status="primary"
      type="button">Cancel
    </button>
    <button
      (click)="onDelete()"
      *ngIf="isEdit"
      class="dataset-delete-button"
      ghost
      nbButton
      shape="round"
      type="button"><span>Delete Dataset</span></button>
  </nb-card-footer>
</nb-card>
